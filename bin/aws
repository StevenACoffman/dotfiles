#!/bin/bash

# default cli path, allow overriding for pyenv shims
# pyenv shim path should be /usr/local/var/pyenv/shims
AWS_CLI_PATH="${AWS_CLI_PATH:-/usr/local/bin}"
if [[ -n "${AWS_VAULT:-}" ]]
then
    "${AWS_CLI_PATH}/aws" "$@"
else
    set -euo pipefail
    exec aws-vault exec "${AWS_VAULT_DEFAULT_PROFILE:-engineer}" -- "${AWS_CLI_PATH}/aws" "$@"
fi
